<!-- =========================
     index.html  (UPDATED w/ mic + hide-line UI hooks)
========================= -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fluency Flow Sing-Along</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <h1>ğŸµ Fluency Flow Sing-Along</h1>

    <div id="container">
      <!-- YOUTUBE PLAYER + VOCAB PANEL -->
      <div id="playerColumn">
        <div id="player"></div>

        <!-- ğŸ”¥ VOCAB PANEL -->
        <div id="vocabPanel">
          <!-- dynamically filled -->
        </div>

        <!-- ğŸ™ï¸ MIC / PRACTICE INFO (optional helper area) -->
        <div id="micInfo" class="mic-info">
          <div class="mic-info-title">ğŸ™ï¸ Sing Practice</div>
          <div class="mic-info-text">
            Tap the mic on a line to record yourself, then play it back to
            compare. Tap ğŸ™ˆ to hide a line and try from memory.
          </div>
          <div class="mic-warn">
            Microphone requires permission and works best on HTTPS or localhost.
          </div>
        </div>
      </div>

      <!-- LYRICS AREA -->
      <div id="lyricsPanel">
        <div id="controls">
          <div class="lang-toggle">
            <label
              ><input type="checkbox" id="showKanji" checked /> Kanji</label
            >
            <label><input type="checkbox" id="showKana" /> Kana</label>
            <label><input type="checkbox" id="showRomaji" /> Romaji</label>
            <label><input type="checkbox" id="showEnglish" /> English</label>
          </div>

          <!-- âœ… NEW: Practice options -->
          <div class="practice-toggle">
            <label>
              <input type="checkbox" id="practiceMode" />
              Practice mode (show mic + hide buttons)
            </label>

            <button id="revealAllLines" type="button" class="mini-btn">
              Reveal all lines
            </button>
          </div>
        </div>

        <!-- âœ… NEW: Lyrics legend / header row for controls (optional) -->
        <div id="lyricsHeader" class="lyrics-header">
          <span class="lyrics-header-left">Lyrics</span>
          <span class="lyrics-header-right">
            <span class="legend-item">ğŸ”Š line</span>
            <span class="legend-item">ğŸ™ record</span>
            <span class="legend-item">â–¶ play me</span>
            <span class="legend-item">ğŸ™ˆ hide</span>
          </span>
        </div>

        <!-- LYRICS -->
        <div id="lyrics" class="lyrics-list">
          <!-- dynamically filled -->
          <!--
            Example of a rendered line (your JS will generate these):
            <div class="lyric-line" data-line-id="0" data-start="12.34" data-end="15.80">
              <div class="line-tools">
                <button class="line-btn play-line" type="button" title="Play line">ğŸ”Š</button>
                <button class="line-btn rec-line" type="button" title="Record">ğŸ™</button>
                <button class="line-btn play-rec" type="button" title="Play your recording" disabled>â–¶</button>
                <button class="line-btn hide-line" type="button" title="Hide/show line">ğŸ™ˆ</button>
              </div>

              <div class="line-content">
                <div class="line-text line-kanji">å›ã®ã“ã¨ãŒå¥½ãã ã‚ˆ</div>
                <div class="line-text line-kana">ãã¿ã®ã“ã¨ãŒã™ãã ã‚ˆ</div>
                <div class="line-text line-romaji">kimi no koto ga suki da yo</div>
                <div class="line-text line-english">I like you</div>
              </div>

              <audio class="rec-audio" hidden></audio>
            </div>
          -->
        </div>

        <div id="speedControl">
          <span>Speed: <span id="speedDisplay">1x</span></span>
          <input
            type="range"
            id="speedSlider"
            min="0.25"
            max="2"
            step="0.25"
            value="1"
          />
        </div>

        <div class="below-controls">
          <label><input type="checkbox" id="showVocab" checked /> Vocab</label>
          <label
            ><input type="checkbox" id="showTeigi" checked /> æ—¥æœ¬èªå®šç¾©</label
          >
        </div>

        <div id="songNav">
          <button id="prevSong" class="song-arrow">âŸ¨</button>
          <button id="nextSong" class="song-arrow">âŸ©</button>
        </div>
      </div>
    </div>

    <!-- YouTube API -->
    <script>
      const tag = document.createElement("script");
      tag.src = "https://www.youtube.com/iframe_api";
      document.head.appendChild(tag);
    </script>

    <script src="script.js"></script>

    <!-- Ko-fi overlay widget -->
    <script src="https://storage.ko-fi.com/cdn/scripts/overlay-widget.js"></script>
    <script>
      kofiWidgetOverlay.draw("danielgagepostma", {
        type: "floating-chat",
        "floating-chat.donateButton.text": "Support me",
        "floating-chat.donateButton.background-color": "#d9534f",
        "floating-chat.donateButton.text-color": "#fff",
      });
    </script>
  </body>
</html>
